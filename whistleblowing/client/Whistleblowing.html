<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Whistleblowing Service Test</title>
		<link rel="stylesheet" href="https://www.cm-innovationlab.it/cm-innovationlab_style.css">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	</head>

    <body>
		<h1>Whistleblowing flow</h1>

		<fieldset id="firstField">
			<legend><h3>[1] First Request Client -> Server:</h3></legend>
			First of all is necessary to send a request with POST method to server<br/>
			(i.e. http://www.cm-innovationlab.it:5002).
			<br/><br/>
			<div style="color: lightslategray; margin-left: 30px;">
				{<br/>
				&emsp;"username": "marco.campominosi",<br/>
				&emsp;"password": "enjoy"<br/>
				}
			</div>
			<br/>
			The encrypted JSON using AES key is:
			<br/><br/>
			<div style="color: lightslategray; margin-left: 30px;" id="firstDiv">	</div>
			<br/>
			<button onclick="sendPostRequest();return false">Try This!</button>
			<br/>
		</fieldset>

		<br/>
		
		<fieldset id="secondField" hidden>
			<legend><h3>[2] First Answer Server -> Client:</h3></legend>
			Server now sends back a JWT, after verifying credentials.
			<br/><br/>
			<div style="color: lightslategray; margin-left: 30px;">
				<div id="secondDiv"></div>
			</div>
			<br/>
		</fieldset>

		<br/>
		
		<fieldset id="thirdField" hidden>
			<legend><h3>[3] Second Request Client -> Server:</h3></legend>
			Now is possible to send a request with JWT in authorization header.<br/>
			For example we send this JSON request:
			<br/><br/>
			<div style="color: lightslategray; margin-left: 30px;">
				{<br/>
				&emsp;"message": "This is a test!",<br/>
				}
			</div>
			<br/>
			The encrypted JSON using AES key is:
			<br/><br/>
			<div style="color: lightslategray; margin-left: 30px;" id="thirdDiv">	</div>
			<br/>
			<button onclick="sendRequestWithJWT();return false">Try This!</button>
			<br/>
		</fieldset>

		<br/>
		
		<fieldset id="fourthField" hidden>
			<legend><h3>[4] Second Answer Server -> Client:</h3></legend>
			Server now sends back a responce, after verifying Token.
			<br/><br/>
			<div style="color: lightslategray; margin-left: 30px;">
				<div id="fourthDiv"></div>
			</div>
			<br/>
			<br/>
		</fieldset>

		<br/><br/>
		
		<small class="copyright">.:. Copyright &copy;2020-<script>document.write(new Date().getFullYear())</script>	CM-InnovationLab.it .:. All Rights Reserved .:.</small>
    </body>

	<script language="javascript" src="whistleblowing.js">	</script>
</html>